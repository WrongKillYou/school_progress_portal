{% load static %}

<section class="calendar">
  <div class="calendar-card">
    <h5>Attendance</h5>
    <input id="calendar" type="text" placeholder="Attendance"
           readonly
           style="width:100%;
           background:#f9f9f9;
           border:none;
           text-align:center;
           font-weight:bold;">
  </div>

  <script type="application/json" id="attendance-data">
      {{ attendance_json|safe }}
  </script>
</section>





        <!-- Badges -->
<section class="dashboard-box" id="badgeModalTrigger" style="cursor: pointer;">
  <h5>Badges</h5>

  <div class="badge-progress">
    <!-- ======== MERIT STAR (5 wedges, clockwise from top) ======== -->
    <svg class="merit-star" viewBox="0 0 100 100" width="72" height="72" aria-label="Merit progress">
      <defs>
        <!-- Perfect 5-point star outline -->
        <path id="meritStarShape"
      d="M50 5 L61.8 35.1 L95.1 35.1 L67.5 57.6 
         L78.6 90 L50 70 L21.4 90 L32.5 57.6 
         L4.9 35.1 L38.2 35.1 Z" />


        <!-- Five circular-sector clip paths: start at top (-90°), step 72° clockwise -->
        <clipPath id="wedge1"><path d="M50,50 L50.000,1.000 A49,49 0 0 1 96.602,34.858 Z"/></clipPath>
        <clipPath id="wedge2"><path d="M50,50 L96.602,34.858 A49,49 0 0 1 78.801,89.642 Z"/></clipPath>
        <clipPath id="wedge3"><path d="M50,50 L78.801,89.642 A49,49 0 0 1 21.199,89.642 Z"/></clipPath>
        <clipPath id="wedge4"><path d="M50,50 L21.199,89.642 A49,49 0 0 1 3.398,34.858 Z"/></clipPath>
        <clipPath id="wedge5"><path d="M50,50 L3.398,34.858  A49,49 0 0 1 50.000,1.000 Z"/></clipPath>
      </defs>

      <!-- outline -->
      <use xlink:href="#meritStarShape" class="star-outline" />

      <!-- 5 fill slices (only show when <= merit_count) -->
      <use xlink:href="#meritStarShape" clip-path="url(#wedge1)" class="star-fill {% if merit_count >= 1 %}active{% endif %}"/>
      <use xlink:href="#meritStarShape" clip-path="url(#wedge2)" class="star-fill {% if merit_count >= 2 %}active{% endif %}"/>
      <use xlink:href="#meritStarShape" clip-path="url(#wedge3)" class="star-fill {% if merit_count >= 3 %}active{% endif %}"/>
      <use xlink:href="#meritStarShape" clip-path="url(#wedge4)" class="star-fill {% if merit_count >= 4 %}active{% endif %}"/>
      <use xlink:href="#meritStarShape" clip-path="url(#wedge5)" class="star-fill {% if merit_count >= 5 %}active{% endif %}"/>
    </svg>

    <!-- ======== DEMERIT BOX (4 sides, clockwise from top) ======== -->
    <svg class="demerit-box" viewBox="0 0 100 100" width="72" height="72" aria-label="Demerit progress">
      <!-- optional faint outline -->
      <rect x="10" y="10" width="80" height="80" class="box-outline" />

      <!-- sides appear clockwise: top, right, bottom, left -->
      <line x1="10" y1="10" x2="90" y2="10" class="box-side {% if demerit_count >= 1 %}active{% endif %}"/>
      <line x1="90" y1="10" x2="90" y2="90" class="box-side {% if demerit_count >= 2 %}active{% endif %}"/>
      <line x1="90" y1="90" x2="10" y2="90" class="box-side {% if demerit_count >= 3 %}active{% endif %}"/>
      <line x1="10" y1="90" x2="10" y2="10" class="box-side {% if demerit_count >= 4 %}active{% endif %}"/>
    </svg>
  </div>
</section>


