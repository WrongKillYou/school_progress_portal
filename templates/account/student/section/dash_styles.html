{% load static %}

<link rel="stylesheet" href="{% static 'flatpickr/flatpickr.min.css' %}">
<script src="{% static 'flatpickr/flatpickr.min.js' %}"></script>

<!-- ─── Component-scoped styles ─────────────────────────────────────── -->
<style>
/* ========== 1. GRID LAYOUT (three columns) ========================== */
.dashboard-container{
    display:grid;
    grid-template-columns:repeat(3,1fr);   /* left / middle / right */
    grid-auto-rows:1fr;                    /* equal height per row */
    gap:10px;
    max-width:1200px;
    margin:0 auto;
    align-items:stretch;                   /* stretch cards */
}

/* Grid stacks for left / middle / right columns */
.left-stack,
.right-stack{
    display:flex;
    flex-direction:column;
    gap:10px;
    height:100%;
}
.middle-stack{                             
    display:flex;
    flex-direction:column;
    height:100%;
    padding:10px;
}
.name-box{margin-top:auto;text-align:center;}

/* === Shared “card” style for most boxes ============================== */
.star-plot,
.announce,
.badge-box,
.middle-stack {
    background:#fff;
    padding:15px;
    border-radius:12px;
    box-shadow:0 0 10px rgba(0,0,0,.05);
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.star-plot:hover,
.announce:hover,
.badge-box:hover,
.middle-stack:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

/* Attendance card (special: no flex, so modal works) */
.calendar {
    background:#fff;
    padding:15px;
    border-radius:12px;
    box-shadow:0 0 10px rgba(0,0,0,.05);
    overflow:hidden;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.calendar:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
}

/* ========== 2. STAR-PLOT (radar chart) ============================== */
.star-plot{text-align:center;}
.chart-wrap{width:100%;max-width:220px;height:220px;margin:0 auto;}

/* ========== 3. ANNOUNCEMENTS ======================================= */
.ann-list{margin:0;padding-left:18px}
.ann-list li{margin-bottom:8px;list-style-type:disc}
.ann-title{font-weight:600}

/* ========== 4. BADGES ============================================== */
.badge-grid{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
.badge{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;width:70px;height:70px}
.badge.star .shard{width:14px;height:14px;margin:2px;background:#ccc;
    clip-path:polygon(50%0,61%35,98%35,68%57,79%91,50%70,21%91,32%57,2%35,39%35)}
.badge.square .shard{width:30px;height:30px;margin:2px;background:#ccc}
.badge .shard.active{background:gold}              
.badge.square .shard.active{background:crimson}    
.badge-progress{display:flex;gap:16px;align-items:center;justify-content:center}

/* Merit star */
.merit-star .star-outline{fill:none;stroke:#c9a634;stroke-width:2}
.merit-star .star-fill{fill:transparent}
.merit-star .star-fill.active{fill:#ffd54d}

/* Demerit box */
.demerit-box .box-outline{fill:none;stroke:#eaeaea;stroke-width:2}
.demerit-box .box-side{stroke:#e0e0e0;stroke-width:6;stroke-linecap:round}
.demerit-box .box-side.active{stroke:#d32f2f}

/* ========== 5. AVATAR ============================================== */
.avatar{text-align:center}
.avatar-img{width:120px;height:120px;border-radius:50%;object-fit:cover}

/* ========== 6. FLATPICKR (attendance calendar) ===================== */
.flatpickr-calendar{max-height:200px !important;overflow-y:auto !important}
.flatpickr-day{font-size:12px;line-height:1.2}
.flatpickr-day.present {
        background-color: #4CAF50 !important;
        color: white !important;
        border-radius: 50% !important;
    }
.flatpickr-day.absent {
        background-color: #F44336 !important;
        color: white !important;
        border-radius: 50% !important;
    }
.flatpickr-day.incomplete {
        background-color: #FFC107 !important;
        color: black !important;
        border-radius: 50% !important;
    }

/* ─── Star-plot overlay window ─────────────────────────────── */
.sp-overlay{
    position:fixed;inset:0;display:none;justify-content:center;align-items:center;
    backdrop-filter:blur(4px);background:rgba(0,0,0,.5);z-index:2000;
}
.sp-overlay.show{display:flex;animation:fadeIn .2s}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}

.sp-window {
  max-width: 600px;
  width: 90%;
  background: white;
  padding: 1rem;
  overflow-y: auto;
  max-height: 90vh;
}

@keyframes grow{to{transform:scale(1)}}

.sp-close{position:absolute;top:8px;right:14px;background:none;border:none;font-size:1.8rem;line-height:1}
.sp-nav{display:flex;justify-content:center;align-items:center;gap:16px;margin-bottom:10px}
.sp-nav button{background:#eee;border:none;padding:4px 10px;font-weight:bold}
#sp-subject-list{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:16px}
#sp-subject-list button{border:1px solid #ccc;background:#fafafa;padding:4px 8px;font-size:.9rem}

.calendar-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  justify-content: center;
  align-items: center;
  z-index: 1050;
  display: none;
}

.calendar-overlay.flex {
  display: flex;
}

.calendar-window {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  max-width: 700px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  box-shadow: 0 0 20px rgba(0,0,0,0.15);
}

.calendar-close {
  float: right;
  font-size: 1.5rem;
  background: none;
  border: none;
  cursor: pointer;
}
</style>
